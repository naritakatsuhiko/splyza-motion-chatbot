# SPLYZA Motion チャットボット仕様書・ガイドライン

**最終更新日**: 2026年2月16日

## 1. プロジェクト概要
- **目的**: 公式ヘルプセンターのナレッジベースを根拠とした、ユーザー向け自動回答アシスタント
- **展開計画**: 
  - Web公開中の [SPLYZA Motion ヘルプセンター](https://splyza.notion.site/SPLYZA-Motion-181df661219480919a35f70ba9b3d5b2) のトップページへ設置。
  - 各種チャネルを通じてチャットボットのリリースをユーザーへ周知し、まずはその存在を広く認知させることを優先する。
- **運用方針**: 
  - ユーザーからの問い合わせに対し、社内リソース（有人対応）で回答した際は、必ず本チャットボットを併せて共有。
  - 「次回以降はこちらでも自己解決が可能である」旨をユーザーへ促し、セルフ解決率の向上を図る。
- **主な役割**: 
  - 導入検討者・利用ユーザーからの技術的・操作的質問への即時回答
  - カスタマーサポートへの問い合わせ工数の削減
  - 正確な一次情報の提供

## 2. 技術仕様
- **基盤モデル**: Gemini 3.0 Flash (`gemini-3-flash-preview`)
- **アーキテクチャ**: Next.js 15 (App Router)
- **APIエンドポイント**: Google AI Studio / Google Cloud Vertex AI (v1beta)
- **回答生成パラメータ**:
  - **Temperature**: 0.1
    - 意図: AIの創造性を抑え、ナレッジベースに忠実で再現性の高い回答を優先
  - **Max Output Tokens**: 4096
    - 意図: 複雑な操作手順や詳細な技術解説が途切れることなく出力されるよう余裕を持った設定

## 3. 回答ロジックと挙動
本チャットボットは、質問の内容がナレッジベース（内部ドキュメント）に含まれているか否かによって、明確に挙動を分けています。

### 3.1 ナレッジベースに記載がある場合
- **重視する点**: 
  - **正確な引用**: ヘルプセンターの記述を正確に反映
  - **手順の網羅**: 操作ステップを省略せずに提示
  - **ブランドカラーの維持**: SPLYZA Motionのブランドイメージに沿った丁寧な回答
- **回答の構成**:
  - 質問に対する直接的な回答
  - 必要に応じた具体的な操作手順（1. 2. 3...）
  - 補足情報および参照URLの提示

### 3.2 ナレッジベースに記載がない場合
- **重視する点**: 
  - **ハルシネーション（虚偽回答）の防止**: 記載がないことを明示し、勝手な推測を排除
  - **適切な窓口への誘導**: ユーザーを放置せず、解決のための次のアクションを提示
- **定型回答の構成**:
  - 「ご質問いただいた内容に関するヘルプ記事が見つかりませんでした」という旨の謝罪
  - 営業担当またはカスタマーサポート窓口への案内
  - サポートメールアドレス（motion.support@splyza.com）の提示

### 3.3 問い合わせ誘導の判断基準
以下のケースでは、AIが自動回答を完結させず、必ず有人サポートへの問い合わせを促します。
- **料金・契約関連**: 個別の見積もりや契約プランの詳細（ナレッジから意図的に除外）
- **未公開の仕様**: 開発ロードマップや将来的な機能追加の予定
- **事務的手続き**: 領収書発行、個別デモの予約、解約手続きなど
- **外部連携**: ナレッジに記載のない他社製品やデバイスとの連携可否
- **高度なトラブル**: ナレッジの対処法（再起動等）で解決しない個別環境の不具合

## 4. 運用・メンテナンス
### 4.1 回答の根拠（RAG）
- **参照データ**: `src/data/knowledge/` 内の Markdown ファイル群
- **データソース**: [SPLYZA Motion ヘルプセンター](https://splyza.notion.site/SPLYZA-Motion-181df661219480919a35f70ba9b3d5b2) の全内容を Markdown 形式で同期
- **更新フロー**: ヘルプセンター（Notion）の更新に合わせて、Markdownファイルを差し替えることで回答精度を維持

### 4.2 メンテナンス方法
- **ナレッジ更新**: 該当ディレクトリにファイルを配置するだけで、再学習なしで即時反映
- **モデル更新**: `src/app/api/query/route.ts` 内のモデルIDを書き換えることで、最新世代のAIへ移行可能

## 5. 検証済みテストケース（質問集）
最新の Gemini 3.0 Flash モデルにおいて、以下の質問に対する正常な挙動を確認済みです。

### A. 製品仕様・操作に関する質問
1. SPLYZA Motionを使い始めるための手順を教えてください。
2. 解析する動画の長さに制限はありますか？
3. 撮影時の端末の向きに指定はありますか？
4. 認識できる道具にはどのようなものがありますか？
5. 3次元認識をするために必要な動画の長さはどれくらいですか？
6. 複数人が映っている場合、誰が解析対象になりますか？
7. 解析に時間がかかる場合の対処法を教えてください。
8. 解析エラーが出やすい服装や環境はありますか？
9. 3次元の座標データをCSVで書き出した際の単位は何ですか？
10. 2D解析の座標データの原点はどこですか？
11. 脊椎の湾曲角度とはどのような数値ですか？
12. 専門家モードとはどのような機能ですか？
13. 3Dモードの「投影面」設定で、XZ面は何を確認するのに適していますか？
14. アプリを使用するためにインターネット環境は常に必要ですか？
15. アプリを削除した場合、解析済みのデータはどうなりますか？

### B. 技術仕様・数値算出に関する深い質問
16. 速度や距離の計算において、基準となる数値は何ですか？
17. 加速度のデータはどのように算出されていますか？
18. 3Dモードで算出される座標は、相対座標ですか？それとも絶対座標ですか？
19. 2D解析でCSV出力した際、座標の数値が正規化されています。この単位と計算式を教えてください。
20. 膝関節の3次元的な角度算出には、どのようなアルゴリズムや学術資料が用いられていますか？

### C. ナレッジ外（サポート誘導）の確認質問
21. 契約プランの料金を教えてください。
22. 領収書を発行してほしいのですが。
23. SPLYZA Motionと他社製品の機能比較表はありますか？
24. Apple Watchと連携して心拍データを動画に重ねることはできますか？
25. 明日の14時にオンラインデモをお願いしたい。
